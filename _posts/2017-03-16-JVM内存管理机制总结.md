---
layout:     post
title:      JVM内存管理机制总结
category: blog
description: 文章内容主要来源于自己阅读周志明《深入理解java虚拟机》的要点总结，包括自己的一些理解和资料查阅
---

## 1、JVM内存模型
![JVM内存模型图](/images/JVM/JVM内存模型图.png)
JVM中的内存区域主要分为程序计数器、栈（虚拟机栈和本地方法栈）、方法区、堆；其中栈区和程序计数器是每一个线程都独立拥有的私有区域，方法区和堆区是所有线程共享的公共区域。
###1.1、程序计数器
程序计数器就是当前线程所执行的字节码的行号，分支、循环、异常处理等都是靠这个计数器来完成的。在多线程执行过程中，为了线程切换之后能恢复到正确的执行位置，每条线程都需要一个独立的程序计数器。另外要注意的是当JVM在执行本地方法时，程序计数器的值为空（Undefined）。程序计数器是唯一一个没有规定OOM异常的区域。
###1.2、栈区
通知所指的栈内存其实就是虚拟机栈，它的随着一个线程的产生而产生，消失而消失，其生命周期与线程同步，故而栈内存一定是线程私有的。栈的主要作用是用来描述方法执行的，方法在执行的同时都会创建一个栈帧（Stack Frame），栈帧用于存放局部变量表、操作数栈、动态链栈、方法出口等信息。
###1.3、堆区
堆是JVM管理的最大的一块内存，是所有线程都共享的，所以在虚拟器启动的时候就创建了。堆的唯一目的就是存放对象的实例，所有对象和数组都要在堆上分配空间。堆的大小是可以通过虚拟机的参数来设置的，-Xmx:配置堆的最大空间大小、-Xms:配置对的初始空间大小